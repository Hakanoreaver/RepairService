<!DOCTYPE html>
<html>
<head>
    <title>Admin Page</title>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


    <script type="text/javascript">
        var selected;

        function selectReport() {
            var e = document.getElementById("firstColumn");
            selected = e.options[e.selectedIndex].value;
            switch (selected) {
                case "1" :
                    showCustomers();
                    document.getElementById("button").style.visibility = "hidden";
                    break;
                case "2" :
                    showProfessionals();
                    document.getElementById("button").style.visibility = "hidden";
                    break;
                case "3" :
                    showVehicles();
                    document.getElementById("button").style.visibility = "hidden";
                    break;
                case "4" :
                    showIssues();
                    document.getElementById("button").style.visibility = "hidden";
                    break;
                case "5" :
                    showRequests();
                    document.getElementById("button").style.visibility = "hidden";
                    break;
                case "6" :
                    showTransactions();
                    document.getElementById("button").style.visibility = "hidden";
                    break;
                case "7" :
                    showBalance();
                    document.getElementById("button").style.visibility = "hidden";
                    break;
                case "8" :
                    document.getElementById("b").onclick = function () {
                        takingsReport()
                    }
                    document.getElementById("button").style.visibility = "visible";
                    break;
                case "9" :
                    customerReport();
                    document.getElementById("button").style.visibility = "hidden";
                    break;
                case "10" :
                    professionalReport();
                    document.getElementById("button").style.visibility = "hidden";
                    break;
                case "11" :
                    document.getElementById("b").onclick = function () {
                        requestReport()
                    }
                    document.getElementById("button").style.visibility = "visible";
                    break;
                case "12" :
                    issuesReport();
                    document.getElementById("button").style.visibility = "hidden";
                    break;
                case "13" :
                    reviewsAll();
                    document.getElementById("button").style.visibility = "hidden";
                    break;
                default :
                    alert("Error");

            }
        }

        function reviewsAll() {
            clearTable();

            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/review/all', false);
            ajax.send();
            var json = JSON.parse(ajax.responseText);

            var rows = document.getElementById("rows");
            var head = document.getElementById("head");
            var newHead = document.createElement("tr");

            var th1 = document.createElement("th");
            th1.scope = "row";
            th1.innerHTML = "Review Id";

            var th2 = document.createElement("th");
            th2.scope = "row";
            th2.innerHTML = "Customer Id";

            var th3 = document.createElement("th");
            th3.scope = "row";
            th3.innerHTML = "Professional Id";

            var th4 = document.createElement("th");
            th4.scope = "row";
            th4.innerHTML = "Text";

            var th6 = document.createElement("th");
            th6.scope = "row";
            th6.innerHTML = "Rating";

            var th5 = document.createElement("th");
            th5.scope = "row";
            th5.innerHTML = "Edit";

            newHead.appendChild(th5);
            newHead.appendChild(th1);
            newHead.appendChild(th2);
            newHead.appendChild(th3);
            newHead.appendChild(th4);
            newHead.appendChild(th6);

            head.appendChild(newHead);

            for (var i = 0; i < json.length; i++) {
                var newRow = document.createElement("tr");
                var td1 = document.createElement("td");
                td1.innerHTML = json[i].reviewId;
                var td2 = document.createElement("td");
                td2.innerHTML = json[i].customerId;
                var td3 = document.createElement("td");
                td3.innerHTML = json[i].professionalId;
                var td4 = document.createElement("td");
                td4.innerHTML = json[i].textString;
                var td5 = document.createElement("td");
                td5.innerHTML = json[i].rating;
                var td8 = document.createElement("td");
                var button = document.createElement("button");
                button.innerHTML = "Edit";
                button.id = json[i].reviewId;
                button.onclick = function () {
                    localStorage.setItem("rEdit", this.id);
                    window.open("EditPages/EditReview.html", "_self");
                }
                td8.appendChild(button)

                newRow.appendChild(td8);
                newRow.appendChild(td1);
                newRow.appendChild(td2);
                newRow.appendChild(td3);
                newRow.appendChild(td4);
                newRow.appendChild(td5);


                rows.appendChild(newRow);
            }
        }

        function showCustomers() {
            clearTable();
            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/customer/all', false);
            ajax.send();
            var json = JSON.parse(ajax.responseText);

            var rows = document.getElementById("rows");
            var head = document.getElementById("head");
            var newHead = document.createElement("tr");

            var th1 = document.createElement("th");
            th1.scope = "row";
            th1.innerHTML = "Id";

            var th2 = document.createElement("th");
            th2.scope = "row";
            th2.innerHTML = "Name";

            var th3 = document.createElement("th");
            th3.scope = "row";
            th3.innerHTML = "Subscription Date";

            var th4 = document.createElement("th");
            th4.scope = "row";
            th4.innerHTML = "Email";

            var th5 = document.createElement("th");
            th5.scope = "row";
            th5.innerHTML = "Mobile Number";

            var th6 = document.createElement("th");
            th6.scope = "row";
            th6.innerHTML = "Longitude";

            var th7 = document.createElement("th");
            th7.scope = "row";
            th7.innerHTML = "Latitude";

            var th8 = document.createElement("th");
            th8.scope = "row";
            th8.innerHTML = "Edit";

            newHead.appendChild(th8);
            newHead.appendChild(th1);
            newHead.appendChild(th2);
            newHead.appendChild(th3);
            newHead.appendChild(th4);
            newHead.appendChild(th5);
            newHead.appendChild(th6);
            newHead.appendChild(th7);
            head.appendChild(newHead);

            for (var i = 0; i < json.length; i++) {
                var newRow = document.createElement("tr");
                var td1 = document.createElement("td");
                td1.innerHTML = json[i].customerId;
                var td2 = document.createElement("td");
                td2.innerHTML = json[i].name;
                var td3 = document.createElement("td");
                td3.innerHTML = json[i].subscriptionDate;
                var td4 = document.createElement("td");
                td4.innerHTML = json[i].email;
                var td5 = document.createElement("td");
                td5.innerHTML = json[i].mobileNumber;
                var td6 = document.createElement("td");
                td6.innerHTML = json[i].longitude;
                var td7 = document.createElement("td");
                td7.innerHTML = json[i].latitude;
                var td8 = document.createElement("td");
                var button = document.createElement("button");
                button.innerHTML = "Edit";
                button.id = json[i].customerId;
                button.onclick = function () {
                    localStorage.setItem("cEdit", this.id);
                    window.open("EditPages/EditCustomer.html", "_self");
                }
                td8.appendChild(button)

                newRow.appendChild(td8);
                newRow.appendChild(td1);
                newRow.appendChild(td2);
                newRow.appendChild(td3);
                newRow.appendChild(td4);
                newRow.appendChild(td5);
                newRow.appendChild(td6);
                newRow.appendChild(td7);

                rows.appendChild(newRow);
            }
        }

        function showProfessionals() {
            clearTable();

            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/professionals/all', false);
            ajax.send();
            var json = JSON.parse(ajax.responseText);

            var rows = document.getElementById("rows");
            var head = document.getElementById("head");
            var newHead = document.createElement("tr");

            var th1 = document.createElement("th");
            th1.scope = "row";
            th1.innerHTML = "Id";

            var th2 = document.createElement("th");
            th2.scope = "row";
            th2.innerHTML = "Name";

            var th3 = document.createElement("th");
            th3.scope = "row";
            th3.innerHTML = "Price Variance";

            var th4 = document.createElement("th");
            th4.scope = "row";
            th4.innerHTML = "Email";

            var th5 = document.createElement("th");
            th5.scope = "row";
            th5.innerHTML = "Mobile Number";

            var th6 = document.createElement("th");
            th6.scope = "row";
            th6.innerHTML = "Longitude";

            var th7 = document.createElement("th");
            th7.scope = "row";
            th7.innerHTML = "Latitude";

            var th8 = document.createElement("th");
            th8.scope = "row";
            th8.innerHTML = "Edit";

            newHead.appendChild(th8);
            newHead.appendChild(th1);
            newHead.appendChild(th2);
            newHead.appendChild(th3);
            newHead.appendChild(th4);
            newHead.appendChild(th5);
            newHead.appendChild(th6);
            newHead.appendChild(th7);

            head.appendChild(newHead);

            for (var i = 0; i < json.length; i++) {
                var newRow = document.createElement("tr");
                var td1 = document.createElement("td");
                td1.innerHTML = json[i].professionalId;
                var td2 = document.createElement("td");
                td2.innerHTML = json[i].name;
                var td4 = document.createElement("td");
                td4.innerHTML = json[i].email;
                var td5 = document.createElement("td");
                td5.innerHTML = json[i].mobileNumber;
                var td6 = document.createElement("td");
                td6.innerHTML = json[i].longitude;
                var td7 = document.createElement("td");
                td7.innerHTML = json[i].latitude;
                var td3 = document.createElement("td");
                td3.innerHTML = json[i].priceVariance;
                var td12 = document.createElement("td");
                var button = document.createElement("button");
                button.innerHTML = "Edit";
                button.id = json[i].professionalId;
                button.onclick = function () {
                    localStorage.setItem("pEdit", this.id);
                    window.open("EditPages/EditProfessional.html", "_self");
                }
                td12.appendChild(button)

                newRow.appendChild(td12);
                newRow.appendChild(td1);
                newRow.appendChild(td2);
                newRow.appendChild(td3);
                newRow.appendChild(td4);
                newRow.appendChild(td5);
                newRow.appendChild(td6);
                newRow.appendChild(td7);


                rows.appendChild(newRow);
            }
        }

        function showVehicles() {
            clearTable();

            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/vehicles/all', false);
            ajax.send();
            var json = JSON.parse(ajax.responseText);

            var rows = document.getElementById("rows");
            var head = document.getElementById("head");
            var newHead = document.createElement("tr");

            var th1 = document.createElement("th");
            th1.scope = "row";
            th1.innerHTML = "Vehicle Id";

            var th2 = document.createElement("th");
            th2.scope = "row";
            th2.innerHTML = "User Id";

            var th3 = document.createElement("th");
            th3.scope = "row";
            th3.innerHTML = "Make/Model";

            var th4 = document.createElement("th");
            th4.scope = "row";
            th4.innerHTML = "Year";

            var th5 = document.createElement("th");
            th5.scope = "row";
            th5.innerHTML = "Edit";

            newHead.appendChild(th5);
            newHead.appendChild(th1);
            newHead.appendChild(th2);
            newHead.appendChild(th3);
            newHead.appendChild(th4);

            head.appendChild(newHead);

            for (var i = 0; i < json.length; i++) {
                var newRow = document.createElement("tr");
                var td1 = document.createElement("td");
                td1.innerHTML = json[i].vehicleId;
                var td2 = document.createElement("td");
                td2.innerHTML = json[i].userId;
                var td3 = document.createElement("td");
                td3.innerHTML = json[i].makeModel;
                var td4 = document.createElement("td");
                td4.innerHTML = json[i].year;
                var td8 = document.createElement("td");
                var button = document.createElement("button");
                button.innerHTML = "Edit";
                button.id = json[i].vehicleId;
                button.onclick = function () {
                    localStorage.setItem("vEdit", this.id);
                    window.open("EditPages/EditVehicle.html", "_self");
                }
                td8.appendChild(button)

                newRow.appendChild(td8);
                newRow.appendChild(td1);
                newRow.appendChild(td2);
                newRow.appendChild(td3);
                newRow.appendChild(td4);


                rows.appendChild(newRow);
            }

        }

        function showIssues() {
            clearTable();

            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/services/all', false);
            ajax.send();
            var json = JSON.parse(ajax.responseText);

            var rows = document.getElementById("rows");
            var head = document.getElementById("head");
            var newHead = document.createElement("tr");

            var th1 = document.createElement("th");
            th1.scope = "row";
            th1.innerHTML = "Id";

            var th2 = document.createElement("th");
            th2.scope = "row";
            th2.innerHTML = "Name";

            var th3 = document.createElement("th");
            th3.scope = "row";
            th3.innerHTML = "Cost";

            var th4 = document.createElement("th");
            th4.scope = "row";
            th4.innerHTML = "Edit";

            newHead.appendChild(th4);
            newHead.appendChild(th1);
            newHead.appendChild(th2);
            newHead.appendChild(th3);

            head.appendChild(newHead);

            for (var i = 0; i < json.length; i++) {
                var newRow = document.createElement("tr");
                var td1 = document.createElement("td");
                td1.innerHTML = json[i].id;
                var td2 = document.createElement("td");
                td2.innerHTML = json[i].name;
                var td3 = document.createElement("td");
                td3.innerHTML = json[i].cost;
                var td12 = document.createElement("td");
                var button = document.createElement("button");
                button.innerHTML = "Edit";
                button.id = json[i].id;
                button.onclick = function () {
                    localStorage.setItem("sEdit", this.id);
                    window.open("EditPages/EditServices.html", "_self");
                }
                td12.appendChild(button);

                newRow.appendChild(td12);
                newRow.appendChild(td1);
                newRow.appendChild(td2);
                newRow.appendChild(td3);


                rows.appendChild(newRow);
            }

        }

        function showRequests() {
            clearTable();

            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/requests/all', false);
            ajax.send();
            var json = JSON.parse(ajax.responseText);

            var rows = document.getElementById("rows");
            var head = document.getElementById("head");
            var newHead = document.createElement("tr");

            var th1 = document.createElement("th");
            th1.scope = "row";
            th1.innerHTML = "Request Id";

            var th2 = document.createElement("th");
            th2.scope = "row";
            th2.innerHTML = "Profesional Id";

            var th3 = document.createElement("th");
            th3.scope = "row";
            th3.innerHTML = "Is Accepted";

            var th4 = document.createElement("th");
            th4.scope = "row";
            th4.innerHTML = "Problem";

            var th5 = document.createElement("th");
            th5.scope = "row";
            th5.innerHTML = "Vehicle Id";

            var th6 = document.createElement("th");
            th6.scope = "row";
            th6.innerHTML = "Date";

            var th7 = document.createElement("th");
            th7.scope = "row";
            th7.innerHTML = "Is Finished";

            var th8 = document.createElement("th");
            th8.scope = "row";
            th8.innerHTML = "Longitude";

            var th9 = document.createElement("th");
            th9.scope = "row";
            th9.innerHTML = "Latitude";

            var th10 = document.createElement("th");
            th10.scope = "row";
            th10.innerHTML = "Customer Id";

            var th11 = document.createElement("th");
            th11.scope = "row";
            th11.innerHTML = "Duration";


            newHead.appendChild(th1);
            newHead.appendChild(th2);
            newHead.appendChild(th10);
            newHead.appendChild(th11);
            newHead.appendChild(th3);
            newHead.appendChild(th4);
            newHead.appendChild(th5);
            newHead.appendChild(th6);
            newHead.appendChild(th7);
            newHead.appendChild(th8);
            newHead.appendChild(th9);

            head.appendChild(newHead);

            for (var i = 0; i < json.length; i++) {
                var newRow = document.createElement("tr");
                var td1 = document.createElement("td");
                td1.innerHTML = json[i].requestId;
                var td2 = document.createElement("td");
                td2.innerHTML = json[i].professionalId;
                var td4 = document.createElement("td");
                td4.innerHTML = json[i].problem;
                var td5 = document.createElement("td");
                td5.innerHTML = json[i].vehicleId;
                var td6 = document.createElement("td");
                td6.innerHTML = json[i].requestDate;
                var td7 = document.createElement("td");
                td7.innerHTML = json[i].isFinished;
                var td3 = document.createElement("td");
                td3.innerHTML = json[i].accepted;
                var td8 = document.createElement("td");
                td8.innerHTML = json[i].longitude;
                var td9 = document.createElement("td");
                td9.innerHTML = json[i].latitude;
                var td10 = document.createElement("td");
                td10.innerHTML = json[i].customerId;
                var td11 = document.createElement("td");
                td11.innerHTML = json[i].duration;


                newRow.appendChild(td1);
                newRow.appendChild(td2);
                newRow.appendChild(td10);
                newRow.appendChild(td11);
                newRow.appendChild(td3);
                newRow.appendChild(td4);
                newRow.appendChild(td5);
                newRow.appendChild(td6);
                newRow.appendChild(td7);
                newRow.appendChild(td8);
                newRow.appendChild(td9);

                rows.appendChild(newRow);
            }
        }

        function showTransactions() {
            clearTable();

            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/transactions/all', false);
            ajax.send();
            var json = JSON.parse(ajax.responseText);

            var rows = document.getElementById("rows");
            var head = document.getElementById("head");
            var newHead = document.createElement("tr");

            var th1 = document.createElement("th");
            th1.scope = "row";
            th1.innerHTML = "Transaction Id";

            var th2 = document.createElement("th");
            th2.scope = "row";
            th2.innerHTML = "Request Id";

            var th3 = document.createElement("th");
            th3.scope = "row";
            th3.innerHTML = "Amount";

            var th4 = document.createElement("th");
            th4.scope = "row";
            th4.innerHTML = "Status";

            var th5 = document.createElement("th");
            th5.scope = "row";
            th5.innerHTML = "Date";

            newHead.appendChild(th1);
            newHead.appendChild(th2);
            newHead.appendChild(th3);
            newHead.appendChild(th4);
            newHead.appendChild(th5);

            head.appendChild(newHead);

            for (var i = 0; i < json.length; i++) {
                var newRow = document.createElement("tr");
                var td1 = document.createElement("td");
                td1.innerHTML = json[i].transactionalId;
                var td2 = document.createElement("td");
                td2.innerHTML = json[i].requestId;
                var td3 = document.createElement("td");
                td3.innerHTML = json[i].amount;
                var td4 = document.createElement("td");
                td4.innerHTML = json[i].status;
                var td5 = document.createElement("td");
                td5.innerHTML = json[i].date;

                newRow.appendChild(td1);
                newRow.appendChild(td2);
                newRow.appendChild(td3);
                newRow.appendChild(td4);
                newRow.appendChild(td5);

                rows.appendChild(newRow);
            }

        }

        function showBalance() {
            clearTable();
            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/balance', false);
            ajax.send();

            var rows = document.getElementById("rows");
            var head = document.getElementById("head");
            var newHead = document.createElement("tr");

            var th1 = document.createElement("th");
            th1.scope = "row";
            th1.innerHTML = "Balance";

            newHead.appendChild(th1);
            head.appendChild(newHead);

            var newRow = document.createElement("tr");
            var td1 = document.createElement("td");
            td1.innerHTML = ajax.responseText;


            newRow.appendChild(td1);
            rows.appendChild(newRow);

        }

        function takingsReport() {
            clearTable();
            var sd = document.getElementById("sd").value;
            var ed = document.getElementById("ed").value;
            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/takingsReport/' + sd + "/" + ed, false);
            ajax.send();
            var json = JSON.parse(ajax.responseText);

            var rows = document.getElementById("rows");
            var head = document.getElementById("head");
            var newHead = document.createElement("tr");

            var th1 = document.createElement("th");
            th1.scope = "row";
            th1.innerHTML = "Total Incoming";

            var th2 = document.createElement("th");
            th2.scope = "row";
            th2.innerHTML = "Total Outgoing";

            var th3 = document.createElement("th");
            th3.scope = "row";
            th3.innerHTML = "Average Incoming";

            var th4 = document.createElement("th");
            th4.scope = "row";
            th4.innerHTML = "Average Outgoing";

            var th5 = document.createElement("th");
            th5.scope = "row";
            th5.innerHTML = "Highest Incoming";

            var th6 = document.createElement("th");
            th6.scope = "row";
            th6.innerHTML = "Highest Outgoing";

            var th7 = document.createElement("th");
            th7.scope = "row";
            th7.innerHTML = "Lowest Incoming";

            var th8 = document.createElement("th");
            th8.scope = "row";
            th8.innerHTML = "Lowest Outgoing";

            var th9 = document.createElement("th");
            th9.scope = "row";
            th9.innerHTML = "Profit";

            newHead.appendChild(th1);
            newHead.appendChild(th2);
            newHead.appendChild(th3);
            newHead.appendChild(th4);
            newHead.appendChild(th5);
            newHead.appendChild(th6);
            newHead.appendChild(th7);
            newHead.appendChild(th8);
            newHead.appendChild(th9);
            head.appendChild(newHead);

            var newRow = document.createElement("tr");
            var td1 = document.createElement("td");
            td1.innerHTML = json.totalIncoming;
            var td2 = document.createElement("td");
            td2.innerHTML = json.totalOutgoing;
            var td3 = document.createElement("td");
            td3.innerHTML = json.averageIncoming;
            var td4 = document.createElement("td");
            td4.innerHTML = json.averageOutgoing;
            var td5 = document.createElement("td");
            td5.innerHTML = json.highestIncoming;
            var td6 = document.createElement("td");
            td6.innerHTML = json.highestOutgoing;
            var td7 = document.createElement("td");
            td7.innerHTML = json.lowestIncoming;
            var td8 = document.createElement("td");
            td8.innerHTML = json.lowestOutgoing;
            var td9 = document.createElement("td");
            td9.innerHTML = json.profit;

            newRow.appendChild(td1);
            newRow.appendChild(td2);
            newRow.appendChild(td3);
            newRow.appendChild(td4);
            newRow.appendChild(td5);
            newRow.appendChild(td6);
            newRow.appendChild(td7);
            newRow.appendChild(td8);
            newRow.appendChild(td9);
            rows.appendChild(newRow);
        }

        function customerReport() {
            clearTable();
            var sd = document.getElementById("sd").value;
            var ed = document.getElementById("ed").value;
            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/customerReport', false);
            ajax.send();
            var json = JSON.parse(ajax.responseText);

            var rows = document.getElementById("rows");
            var head = document.getElementById("head");
            var newHead = document.createElement("tr");

            var th1 = document.createElement("th");
            th1.scope = "row";
            th1.innerHTML = "Average Number of Requests";

            var th2 = document.createElement("th");
            th2.scope = "row";
            th2.innerHTML = "Number of Customers";

            var th3 = document.createElement("th");
            th3.scope = "row";
            th3.innerHTML = "Number of Loyalty Customers";

            var th4 = document.createElement("th");
            th4.scope = "row";
            th4.innerHTML = "Number not Loyalty Customers";

            var th5 = document.createElement("th");
            th5.scope = "row";
            th5.innerHTML = "Average Spent";

            newHead.appendChild(th1);
            newHead.appendChild(th2);
            newHead.appendChild(th3);
            newHead.appendChild(th4);
            newHead.appendChild(th5);
            head.appendChild(newHead);

            var newRow = document.createElement("tr");
            var td1 = document.createElement("td");
            td1.innerHTML = json.averageNumRequests;
            var td2 = document.createElement("td");
            td2.innerHTML = json.numCustomers;
            var td3 = document.createElement("td");
            td3.innerHTML = json.numLoyaltyCustomers;
            var td4 = document.createElement("td");
            td4.innerHTML = json.numNotLoyaltyCustomers;
            var td5 = document.createElement("td");
            td5.innerHTML = json.averageSpent;
            newRow.appendChild(td1);
            newRow.appendChild(td2);
            newRow.appendChild(td3);
            newRow.appendChild(td4);
            newRow.appendChild(td5);
            rows.appendChild(newRow);
        }

        function professionalReport() {
            clearTable();

            var sd = document.getElementById("sd").value;
            var ed = document.getElementById("ed").value;
            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/professionalReport', false);
            ajax.send();
            var json = JSON.parse(ajax.responseText);

            var rows = document.getElementById("rows");
            var head = document.getElementById("head");
            var newHead = document.createElement("tr");

            var th1 = document.createElement("th");
            th1.scope = "row";
            th1.innerHTML = "Average Number of Requests";

            var th2 = document.createElement("th");
            th2.scope = "row";
            th2.innerHTML = "Number of Professionals";

            var th3 = document.createElement("th");
            th3.scope = "row";
            th3.innerHTML = "Average Earnt";


            newHead.appendChild(th1);
            newHead.appendChild(th2);
            newHead.appendChild(th3);
            head.appendChild(newHead);

            var newRow = document.createElement("tr");
            var td1 = document.createElement("td");
            td1.innerHTML = json.averageNum;
            var td2 = document.createElement("td");
            td2.innerHTML = json.numProfessionals;
            var td3 = document.createElement("td");
            td3.innerHTML = json.averageEarnt;

            newRow.appendChild(td1);
            newRow.appendChild(td2);
            newRow.appendChild(td3);
            rows.appendChild(newRow);

        }

        function requestReport() {
            clearTable();

            var sd = document.getElementById("sd").value;
            var ed = document.getElementById("ed").value;
            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/requestsReport/' + sd + "/" + ed, false);
            ajax.send();
            var json = JSON.parse(ajax.responseText);

            var rows = document.getElementById("rows");
            var head = document.getElementById("head");
            var newHead = document.createElement("tr");

            var th1 = document.createElement("th");
            th1.scope = "row";
            th1.innerHTML = "Number of Requests";

            var th2 = document.createElement("th");
            th2.scope = "row";
            th2.innerHTML = "Average";

            var th3 = document.createElement("th");
            th3.scope = "row";
            th3.innerHTML = "Total";


            newHead.appendChild(th1);
            newHead.appendChild(th2);
            newHead.appendChild(th3);
            head.appendChild(newHead);

            var newRow = document.createElement("tr");
            var td1 = document.createElement("td");
            td1.innerHTML = json.numRequests;
            var td2 = document.createElement("td");
            td2.innerHTML = json.average;
            var td3 = document.createElement("td");
            td3.innerHTML = json.total;

            newRow.appendChild(td1);
            newRow.appendChild(td2);
            newRow.appendChild(td3);
            rows.appendChild(newRow);
        }

        function issuesReport() {
            clearTable();

            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/problemReport', false);
            ajax.send();
            var json = JSON.parse(ajax.responseText);

            var rows = document.getElementById("rows");
            var head = document.getElementById("head");
            var newHead = document.createElement("tr");

            var th1 = document.createElement("th");
            th1.scope = "row";
            th1.innerHTML = "Request Id";

            var th2 = document.createElement("th");
            th2.scope = "row";
            th2.innerHTML = "Profesional Id";

            var th3 = document.createElement("th");
            th3.scope = "row";
            th3.innerHTML = "Is Accepted";

            var th4 = document.createElement("th");
            th4.scope = "row";
            th4.innerHTML = "Problem";

            var th5 = document.createElement("th");
            th5.scope = "row";
            th5.innerHTML = "Vehicle Id";

            var th6 = document.createElement("th");
            th6.scope = "row";
            th6.innerHTML = "Date";

            var th7 = document.createElement("th");
            th7.scope = "row";
            th7.innerHTML = "Is Finished";

            var th8 = document.createElement("th");
            th8.scope = "row";
            th8.innerHTML = "Longitude";

            var th9 = document.createElement("th");
            th9.scope = "row";
            th9.innerHTML = "Latitude";

            var th10 = document.createElement("th");
            th10.scope = "row";
            th10.innerHTML = "Customer Id";

            var th11 = document.createElement("th");
            th11.scope = "row";
            th11.innerHTML = "Duration";

            newHead.appendChild(th1);
            newHead.appendChild(th2);
            newHead.appendChild(th10);
            newHead.appendChild(th11);
            newHead.appendChild(th3);
            newHead.appendChild(th4);
            newHead.appendChild(th5);
            newHead.appendChild(th6);
            newHead.appendChild(th7);
            newHead.appendChild(th8);
            newHead.appendChild(th9);
            head.appendChild(newHead);

            for (var i = 0; i < json.length; i++) {
                var newRow = document.createElement("tr");
                var td1 = document.createElement("td");
                td1.innerHTML = json[i].requestId;
                var td2 = document.createElement("td");
                td2.innerHTML = json[i].professionalId;
                var td4 = document.createElement("td");
                td4.innerHTML = json[i].problem;
                var td5 = document.createElement("td");
                td5.innerHTML = json[i].vehicleId;
                var td6 = document.createElement("td");
                td6.innerHTML = json[i].requestDate;
                var td7 = document.createElement("td");
                td7.innerHTML = json[i].isFinished;
                var td3 = document.createElement("td");
                td3.innerHTML = json[i].accepted;
                var td8 = document.createElement("td");
                td8.innerHTML = json[i].longitude;
                var td9 = document.createElement("td");
                td9.innerHTML = json[i].latitude;
                var td10 = document.createElement("td");
                td10.innerHTML = json[i].customerId;
                var td11 = document.createElement("td");
                td11.innerHTML = json[i].duration;

                newRow.appendChild(td1);
                newRow.appendChild(td2);
                newRow.appendChild(td10);
                newRow.appendChild(td11);
                newRow.appendChild(td3);
                newRow.appendChild(td4);
                newRow.appendChild(td5);
                newRow.appendChild(td6);
                newRow.appendChild(td7);
                newRow.appendChild(td8);
                newRow.appendChild(td9);
                rows.appendChild(newRow);
            }

        }

        function clearTable() {
            var head = document.getElementById("head");
            while (head.firstChild) {
                head.removeChild(head.firstChild);
            }
            var rows = document.getElementById("rows");
            while (rows.firstChild) {
                rows.removeChild(rows.firstChild);
            }
        }

        function updatePassword() {
            var newPass = prompt("Please Enter new Password", "Password");
            var ajax = new XMLHttpRequest();
            ajax.open('GET', 'http://localhost:9090/main/admin/update/' + newPass + "/" + localStorage.getItem("aid"), false);
            ajax.send();
        }

        function search() {
            clearTable();
            var e = document.getElementById("secondColumn");
            selected = e.options[e.selectedIndex].value;
            switch (selected) {
                case "1" :
                    var id = document.getElementById("searchBar").value;
                    var ajax = new XMLHttpRequest();
                    ajax.open('GET', 'http://localhost:9090/main/user/find/' + id, false);
                    ajax.send();
                    var head = document.getElementById("head");
                    var rows = document.getElementById("rows");
                    var newHead = document.createElement("tr");

                    var th1 = document.createElement("th");
                    th1.scope = "row";
                    th1.innerHTML = "Id";

                    var th2 = document.createElement("th");
                    th2.scope = "row";
                    th2.innerHTML = "Name";

                    var th3 = document.createElement("th");
                    th3.scope = "row";
                    th3.innerHTML = "Subscription Date";

                    var th4 = document.createElement("th");
                    th4.scope = "row";
                    th4.innerHTML = "Email";

                    var th5 = document.createElement("th");
                    th5.scope = "row";
                    th5.innerHTML = "Mobile Number";

                    var th6 = document.createElement("th");
                    th6.scope = "row";
                    th6.innerHTML = "Longitude";

                    var th7 = document.createElement("th");
                    th7.scope = "row";
                    th7.innerHTML = "Latitude";

                    var th8 = document.createElement("th");
                    th8.scope = "row";
                    th8.innerHTML = "Edit";
                    newHead.appendChild(th8);
                    newHead.appendChild(th1);
                    newHead.appendChild(th2);
                    newHead.appendChild(th3);
                    newHead.appendChild(th4);
                    newHead.appendChild(th5);
                    newHead.appendChild(th6);
                    newHead.appendChild(th7);

                    head.appendChild(newHead);
                    var json = JSON.parse(ajax.responseText);
                    var newRow = document.createElement("tr");
                    var td1 = document.createElement("td");
                    td1.innerHTML = json.customerId;
                    var td2 = document.createElement("td");
                    td2.innerHTML = json.name;
                    var td3 = document.createElement("td");
                    td3.innerHTML = json.subscriptionDate;
                    var td4 = document.createElement("td");
                    td4.innerHTML = json.email;
                    var td5 = document.createElement("td");
                    td5.innerHTML = json.mobileNumber;
                    var td6 = document.createElement("td");
                    td6.innerHTML = json.longitude;
                    var td7 = document.createElement("td");
                    td7.innerHTML = json.latitude;
                    var td8 = document.createElement("td");
                    var button = document.createElement("button");
                    button.innerHTML = "Edit";
                    button.id = json.customerId;
                    button.onclick = function () {
                        localStorage.setItem("cEdit", this.id);
                        window.open("EditPages/EditCustomer.html", "_self");
                    }
                    td8.appendChild(button)
                    newRow.appendChild(td8);
                    newRow.appendChild(td1);
                    newRow.appendChild(td2);
                    newRow.appendChild(td3);
                    newRow.appendChild(td4);
                    newRow.appendChild(td5);
                    newRow.appendChild(td6);
                    newRow.appendChild(td7);


                    rows.appendChild(newRow);
                    break;
                case "2" :
                    var ajax = new XMLHttpRequest();
                    var id = document.getElementById("searchBar").value;
                    ajax.open('GET', 'http://localhost:9090/main/professional/find/' + id, false);
                    ajax.send();
                    json = JSON.parse(ajax.responseText);
                    var rows = document.getElementById("rows");
                    var head = document.getElementById("head");
                    var newHead = document.createElement("tr");

                    var th1 = document.createElement("th");
                    th1.scope = "row";
                    th1.innerHTML = "Id";

                    var th2 = document.createElement("th");
                    th2.scope = "row";
                    th2.innerHTML = "Name";

                    var th3 = document.createElement("th");
                    th3.scope = "row";
                    th3.innerHTML = "Price Variance";

                    var th4 = document.createElement("th");
                    th4.scope = "row";
                    th4.innerHTML = "Email";

                    var th5 = document.createElement("th");
                    th5.scope = "row";
                    th5.innerHTML = "Mobile Number";

                    var th6 = document.createElement("th");
                    th6.scope = "row";
                    th6.innerHTML = "Longitude";

                    var th7 = document.createElement("th");
                    th7.scope = "row";
                    th7.innerHTML = "Latitude";

                    var th8 = document.createElement("th");
                    th8.scope = "row";
                    th8.innerHTML = "Edit";
                    newHead.appendChild(th8);
                    newHead.appendChild(th1);
                    newHead.appendChild(th2);
                    newHead.appendChild(th3);
                    newHead.appendChild(th4);
                    newHead.appendChild(th5);
                    newHead.appendChild(th6);
                    newHead.appendChild(th7);

                    head.appendChild(newHead);

                    var newRow = document.createElement("tr");
                    var td1 = document.createElement("td");
                    td1.innerHTML = json.professionalId;
                    var td2 = document.createElement("td");
                    td2.innerHTML = json.name;
                    var td4 = document.createElement("td");
                    td4.innerHTML = json.email;
                    var td5 = document.createElement("td");
                    td5.innerHTML = json.mobileNumber;
                    var td6 = document.createElement("td");
                    td6.innerHTML = json.longitude;
                    var td7 = document.createElement("td");
                    td7.innerHTML = json.latitude;
                    var td3 = document.createElement("td");
                    td3.innerHTML = json.priceVariance;
                    var td12 = document.createElement("td");
                    var button = document.createElement("button");
                    button.innerHTML = "Edit";
                    button.id = json.professionalId;
                    button.onclick = function () {
                        localStorage.setItem("pEdit", this.id);
                        window.open("EditPages/EditProfessional.html", "_self");
                    }
                    td12.appendChild(button)
                    newRow.appendChild(td12);
                    newRow.appendChild(td1);
                    newRow.appendChild(td2);
                    newRow.appendChild(td3);
                    newRow.appendChild(td4);
                    newRow.appendChild(td5);
                    newRow.appendChild(td6);
                    newRow.appendChild(td7);


                    rows.appendChild(newRow);

                    break;
                case "3" :
                    var id = document.getElementById("searchBar").value;
                    var ajax = new XMLHttpRequest();
                    ajax.open('GET', 'http://localhost:9090/main/vehicle/byId/' + id, false);
                    ajax.send();
                    var json = JSON.parse(ajax.responseText);

                    var rows = document.getElementById("rows");
                    var head = document.getElementById("head");
                    var newHead = document.createElement("tr");

                    var th1 = document.createElement("th");
                    th1.scope = "row";
                    th1.innerHTML = "Vehicle Id";

                    var th2 = document.createElement("th");
                    th2.scope = "row";
                    th2.innerHTML = "User Id";

                    var th3 = document.createElement("th");
                    th3.scope = "row";
                    th3.innerHTML = "Make/Model";

                    var th4 = document.createElement("th");
                    th4.scope = "row";
                    th4.innerHTML = "Year";

                    var th5 = document.createElement("th");
                    th5.scope = "row";
                    th5.innerHTML = "Edit";

                    newHead.appendChild(th5);
                    newHead.appendChild(th1);
                    newHead.appendChild(th2);
                    newHead.appendChild(th3);
                    newHead.appendChild(th4);

                    head.appendChild(newHead);

                        var newRow = document.createElement("tr");
                        var td1 = document.createElement("td");
                        td1.innerHTML = json.vehicleId;
                        var td2 = document.createElement("td");
                        td2.innerHTML = json.userId;
                        var td3 = document.createElement("td");
                        td3.innerHTML = json.makeModel;
                        var td4 = document.createElement("td");
                        td4.innerHTML = json.year;
                        var td8 = document.createElement("td");
                        var button = document.createElement("button");
                        button.innerHTML = "Edit";
                    button.id = json.vehicleId;
                    button.onclick = function () {
                        localStorage.setItem("vEdit", this.id);
                        window.open("EditPages/EditVehicle.html", "_self");
                    }
                        td8.appendChild(button)
                        newRow.appendChild(td8);
                        newRow.appendChild(td1);
                        newRow.appendChild(td2);
                        newRow.appendChild(td3);
                        newRow.appendChild(td4);


                        rows.appendChild(newRow);

                    break;
                case "4" :
                    var id = document.getElementById("searchBar").value;
                    var ajax = new XMLHttpRequest();
                    ajax.open('GET', 'http://localhost:9090/main/service/byId/' + id, false);
                    ajax.send();
                    var json = JSON.parse(ajax.responseText);

                    var rows = document.getElementById("rows");
                    var head = document.getElementById("head");
                    var newHead = document.createElement("tr");

                    var th1 = document.createElement("th");
                    th1.scope = "row";
                    th1.innerHTML = "Id";

                    var th2 = document.createElement("th");
                    th2.scope = "row";
                    th2.innerHTML = "Name";

                    var th3 = document.createElement("th");
                    th3.scope = "row";
                    th3.innerHTML = "Cost";

                    var th4 = document.createElement("th");
                    th4.scope = "row";
                    th4.innerHTML = "Edit";

                    newHead.appendChild(th4);
                    newHead.appendChild(th1);
                    newHead.appendChild(th2);
                    newHead.appendChild(th3);

                    head.appendChild(newHead);

                        var newRow = document.createElement("tr");
                        var td1 = document.createElement("td");
                        td1.innerHTML = json.id;
                        var td2 = document.createElement("td");
                        td2.innerHTML = json.name;
                        var td3 = document.createElement("td");
                        td3.innerHTML = json.cost;
                        var td12 = document.createElement("td");
                        var button = document.createElement("button");
                        button.innerHTML = "Edit";
                        button.id = json.id;
                        button.onclick = function () {
                            localStorage.setItem("sEdit", this.id);
                            window.open("EditPages/EditServices.html", "_self");
                        }
                        td12.appendChild(button)
                         newRow.appendChild(td12);
                        newRow.appendChild(td1);
                        newRow.appendChild(td2);
                        newRow.appendChild(td3);


                        rows.appendChild(newRow);

                    break;
                case "5" :
                    var id = document.getElementById("searchBar").value;
                    var ajax = new XMLHttpRequest();
                    ajax.open('GET', 'http://localhost:9090/main/requests/byId/' + id, false);
                    ajax.send();
                    var json = JSON.parse(ajax.responseText);

                    var rows = document.getElementById("rows");
                    var head = document.getElementById("head");
                    var newHead = document.createElement("tr");

                    var th1 = document.createElement("th");
                    th1.scope = "row";
                    th1.innerHTML = "Request Id";

                    var th2 = document.createElement("th");
                    th2.scope = "row";
                    th2.innerHTML = "Profesional Id";

                    var th3 = document.createElement("th");
                    th3.scope = "row";
                    th3.innerHTML = "Is Accepted";

                    var th4 = document.createElement("th");
                    th4.scope = "row";
                    th4.innerHTML = "Problem";

                    var th5 = document.createElement("th");
                    th5.scope = "row";
                    th5.innerHTML = "Vehicle Id";

                    var th6 = document.createElement("th");
                    th6.scope = "row";
                    th6.innerHTML = "Date";

                    var th7 = document.createElement("th");
                    th7.scope = "row";
                    th7.innerHTML = "Is Finished";

                    var th8 = document.createElement("th");
                    th8.scope = "row";
                    th8.innerHTML = "Longitude";

                    var th9 = document.createElement("th");
                    th9.scope = "row";
                    th9.innerHTML = "Latitude";

                    var th10 = document.createElement("th");
                    th10.scope = "row";
                    th10.innerHTML = "Customer Id";

                    var th11 = document.createElement("th");
                    th11.scope = "row";
                    th11.innerHTML = "Duration";

                    var th12 = document.createElement("th");
                    th12.scope = "row";
                    th12.innerHTML = "Edit";

                    newHead.appendChild(th1);
                    newHead.appendChild(th2);
                    newHead.appendChild(th10);
                    newHead.appendChild(th11);
                    newHead.appendChild(th3);
                    newHead.appendChild(th4);
                    newHead.appendChild(th5);
                    newHead.appendChild(th6);
                    newHead.appendChild(th7);
                    newHead.appendChild(th8);
                    newHead.appendChild(th9);
                    newHead.appendChild(th12)
                    head.appendChild(newHead);

                        var newRow = document.createElement("tr");
                        var td1 = document.createElement("td");
                        td1.innerHTML = json.requestId;
                        var td2 = document.createElement("td");
                        td2.innerHTML = json.professionalId;
                        var td4 = document.createElement("td");
                        td4.innerHTML = json.problem;
                        var td5 = document.createElement("td");
                        td5.innerHTML = json.vehicleId;
                        var td6 = document.createElement("td");
                        td6.innerHTML = json.requestDate;
                        var td7 = document.createElement("td");
                        td7.innerHTML = json.isFinished;
                        var td3 = document.createElement("td");
                        td3.innerHTML = json.accepted;
                        var td8 = document.createElement("td");
                        td8.innerHTML = json.longitude;
                        var td9 = document.createElement("td");
                        td9.innerHTML = json.latitude;
                        var td10 = document.createElement("td");
                        td10.innerHTML = json.customerId;
                        var td11 = document.createElement("td");
                        td11.innerHTML = json.duration;
                        var td12 = document.createElement("td");
                        var button = document.createElement("button");
                        button.innerHTML = "Edit";
                        var id = json.requestId;
                        button.onclick = function () {
                            edit(id);
                        }
                        td12.appendChild(button)

                        newRow.appendChild(td1);
                        newRow.appendChild(td2);
                        newRow.appendChild(td10);
                        newRow.appendChild(td11);
                        newRow.appendChild(td3);
                        newRow.appendChild(td4);
                        newRow.appendChild(td5);
                        newRow.appendChild(td6);
                        newRow.appendChild(td7);
                        newRow.appendChild(td8);
                        newRow.appendChild(td9);
                        newRow.appendChild(td12);
                        rows.appendChild(newRow);

                    break;
                case "6" :
                    var id = document.getElementById("searchBar").value;
                    var ajax = new XMLHttpRequest();
                    ajax.open('GET', 'http://localhost:9090/main/transaction/byId/' + id, false);
                    ajax.send();
                    var json = JSON.parse(ajax.responseText);

                    var rows = document.getElementById("rows");
                    var head = document.getElementById("head");
                    var newHead = document.createElement("tr");

                    var th1 = document.createElement("th");
                    th1.scope = "row";
                    th1.innerHTML = "Transaction Id";

                    var th2 = document.createElement("th");
                    th2.scope = "row";
                    th2.innerHTML = "Request Id";

                    var th3 = document.createElement("th");
                    th3.scope = "row";
                    th3.innerHTML = "Amount";

                    var th4 = document.createElement("th");
                    th4.scope = "row";
                    th4.innerHTML = "Status";

                    var th5 = document.createElement("th");
                    th5.scope = "row";
                    th5.innerHTML = "Date";

                    var th6 = document.createElement("th");
                    th6.scope = "row";
                    th6.innerHTML = "Edit";


                    newHead.appendChild(th1);
                    newHead.appendChild(th2);
                    newHead.appendChild(th3);
                    newHead.appendChild(th4);
                    newHead.appendChild(th5);
                    newHead.appendChild(th6);
                    head.appendChild(newHead);

                        var newRow = document.createElement("tr");
                        var td1 = document.createElement("td");
                        td1.innerHTML = json.transactionalId;
                        var td2 = document.createElement("td");
                        td2.innerHTML = json.requestId;
                        var td3 = document.createElement("td");
                        td3.innerHTML = json.amount;
                        var td4 = document.createElement("td");
                        td4.innerHTML = json.status;
                        var td5 = document.createElement("td");
                        td5.innerHTML = json.date;
                        var td12 = document.createElement("td");
                        var button = document.createElement("button");
                        button.innerHTML = "Edit";
                        var id = json.transactionalId;
                        button.onclick = function () {
                            edit(id);
                        }
                        td12.appendChild(button)


                        newRow.appendChild(td1);
                        newRow.appendChild(td2);
                        newRow.appendChild(td3);
                        newRow.appendChild(td4);
                        newRow.appendChild(td5);
                        newRow.appendChild(td12)
                        rows.appendChild(newRow);

            }

        }

        function edit(id) {

        }
    </script>
</head>
<body style="background-color: #add8e6">
<h1 align="middle" style="margin: 50px"> Admin Console </h1>
<div class="row">
    <div class="col-sm" style="float: middle" align="middle">
        Select Report To View
        <br>
        <select id="firstColumn">
            <option value="1">Show All Customers</option>
            <option value="2">Show All Professionals</option>
            <option value="3">Show All Vehicles</option>
            <option value="4">Show All Services</option>
            <option value="5">Show All Requests</option>
            <option value="13">Show All Reviews</option>
            <option value="6">Show All Transactions</option>
            <option value="7">Show Balance</option>
            <option value="8">View Takings Report</option>
            <option value="9">View Customer Report</option>
            <option value="10">View Professional Report</option>
            <option value="11">View Requests Report</option>
            <option value="12">View Problems Report</option>
        </select>
        <button onclick="selectReport()">View</button>
        <br>
        <div id="button" style="visibility: hidden">
            <input id="sd" type="date" placeholder="Start Date">
            <input id="ed" type="date" placeholder="End Date">
            <button id="b" onclick="takingsReport()">Generate Takings Report</button>
        </div>
        <input type="text" placeholder="Search" id="searchBar"/>
        <select id="secondColumn">
            <option value="1">Customers</option>
            <option value="2">Professionals</option>
            <option value="3">Vehicles</option>
            <option value="4">Services</option>
            <option value="5">Requests</option>
            <option value="6">Transactions</option>
        </select>
        <button style="margin-bottom: 20px" onclick="search()">Search</button>
    </div>

</div>

<div class="row">
    <div class="col-sm-3">
    </div>
    <div class="col-sm-6">
        <table class="table table-striped" style="height: 300px; width: 100%; float: middle">
            <thead id="head">
            </thead>
            <tbody id="rows">
            </tbody>
        </table>
        <h3 align="center">
            <button onclick="updatePassword()">Update Password</button>
        </h3>
    </div>
    <div class="col-sm-3">
    </div>
</div>
</body>
</html>